From 5842f6ecb45c590c989b95facbee1136d7216c1f Mon Sep 17 00:00:00 2001
From: Amine Khaldi <amine.khaldi@reactos.org>
Date: Fri, 20 Mar 2015 11:06:47 +0100
Subject: [PATCH 2/7] Do not compute architecture specific link flags when
 dealing with static libs.

---
 Source/cmNinjaNormalTargetGenerator.cxx | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Source/cmNinjaNormalTargetGenerator.cxx b/Source/cmNinjaNormalTargetGenerator.cxx
index 84c19a30a..d56354cf0 100644
--- a/Source/cmNinjaNormalTargetGenerator.cxx
+++ b/Source/cmNinjaNormalTargetGenerator.cxx
@@ -523,7 +523,7 @@ void cmNinjaNormalTargetGenerator::WriteLinkStatement()
     localGen.AddArchitectureFlags(t, &genTarget, TargetLinkLanguage, cfgName);
     vars["FLAGS"] = t;
     }
-  else
+  else if (targetType == cmTarget::SHARED_LIBRARY || targetType == cmTarget::MODULE_LIBRARY)
     {
     std::string t = vars["ARCH_FLAGS"];
     localGen.AddArchitectureFlags(t, &genTarget, TargetLinkLanguage, cfgName);
-- 
2.17.1

